(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-home"],{1335:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allMenu=n,e.info=o,e.ordersSplit=r,e.memberPay=s,e.getCrmCard=d,e.myorders=c,e.pay=p,e.param=u,e.orderDetails=l,e.getInfo=f,e.getOpenId=h,e.getPhone=v,e.getUnionid=b,e.getCoupon=g,e.discountPrice=w,e.tuiwm=m,e.cancelwm=x,e.placeAnOrder=y,e.confirm=k,e.addAddr=_,e.addrEdit=I,e.addrGet=C,e.addrDel=L,e.calAmount=P,e.upCardPage=S;var a=i("1956");function n(t){return a.http.post("/dian/menu/allMenu?wmType="+t.wmtype+"&shopId="+t.shopId)}function o(t){return a.http.post("/dian/shop/info?wmType="+t.wmtype+"&shopId="+t.shopId)}function r(t){return a.http.post("/dian/orders/split",t)}function s(t){return a.http.post("/dishes/orders/memberPay",t)}function d(t){return a.http.post("/crm/getCrmCard",t)}function c(t){return a.http.post("/dian/orders/myorders",t)}function p(t){return a.http.post("/dian/orders/payvip",t)}function u(t,e){return a.http.post("/dishes/menuShop/param?param="+t+"&shopId="+e)}function l(t){return a.http.post("/dian/orders/return",t)}function f(t){return a.http.post("/dian/shop/info?shopId="+t+"&wmType=1")}function h(t,e,i){var n={code:e,wxUser:i};return a.http.post("/dian/miniapp/"+t+"/info",n)}function v(t,e,i,n){console.log(e,i);var o={session_key:n.session_key,encryptedData:e.encryptedData,iv:e.iv,appType:0,openid:n.openid,unionid:n.unionid,userInfo:i.userInfo};return a.http.post("/dian/miniapp/"+t+"/phone?",o)}function b(t){return a.http.post("/crm/unionid",t)}function g(t){return a.http.post("/tapi/memberCoupon",t)}function w(t){return a.http.post("/dishes/api/discountPrice",t)}function m(t){return a.http.post("/dishes/orders/tuiwm",t)}function x(t){return a.http.post("/dishes/orders/cancelwm",t)}function y(t){return a.http.post("/dian/orders/entry",t)}function k(t){return a.http.post("/dishes/orders/confirm",t)}function _(t){return a.http.post("/dian/addr",t)}function I(t){return a.http.post("/dian/addr/edit",t)}function C(t){return a.http.post("/dian/addr/get",t)}function L(t){return a.http.post("/dian/addr/del/"+t)}function P(t){return a.http.post("/dian/orders/amount",t)}function S(t){return a.http.post("/crm/upCardInfo",t)}},"1a19":function(t,e,i){"use strict";var a=i("5b07"),n=i.n(a);n.a},"25b4":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".home[data-v-3bc4e3a2]{background-color:#f7f7f7}.content[data-v-3bc4e3a2]{padding:%?34?% %?24?% 0;background-color:#f7f7f7}.bg[data-v-3bc4e3a2]{height:%?20?%;background-color:#fafafa}.errData[data-v-3bc4e3a2]{text-align:center;font-size:%?30?%;color:#999;background-color:#fff;padding-top:15vh}.headImage[data-v-3bc4e3a2]{height:%?126?%!important;width:%?702?%!important;-webkit-border-radius:%?8?%;border-radius:%?8?%}.present-shop[data-v-3bc4e3a2]{background-color:#fff;padding-bottom:%?10?%;padding-top:%?20?%;-webkit-border-radius:%?8?%;border-radius:%?8?%;display:-webkit-box;display:-webkit-flex;display:flex;position:relative}.present-shop .current[data-v-3bc4e3a2]{background-color:#f84300;color:#fff;height:%?28?%;line-height:%?28?%;width:%?100?%;position:absolute;top:%?25?%;font-size:%?23?%;text-align:center;right:0;-webkit-border-radius:%?14?% 0 0 %?14?%;border-radius:%?14?% 0 0 %?14?%}.present-shop .present-l[data-v-3bc4e3a2]{padding-left:%?20?%}.present-shop .present-shop-logo[data-v-3bc4e3a2]{width:%?128?%;height:%?128?%;border:%?1?% solid #eee;-webkit-border-radius:%?8?%;border-radius:%?8?%;margin-bottom:%?15?%}.present-shop .present-shop-logo uni-image[data-v-3bc4e3a2]{-webkit-border-radius:%?8?%;border-radius:%?8?%;width:%?128?%;height:%?128?%}.present-shop .shop-tag[data-v-3bc4e3a2]{background-color:#feeae5;color:#f63100;-webkit-border-radius:%?8?%;border-radius:%?8?%;margin-right:%?20?%;margin-top:%?10?%;padding:0 %?16?%}.present-shop .present-shop-text[data-v-3bc4e3a2]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:%?20?%}.present-shop .present-shop-text .present-row-flex[data-v-3bc4e3a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;color:#5c5958;font-size:%?24?%;line-height:%?40?%}.present-shop .present-shop-text .present-row-flex .item[data-v-3bc4e3a2]{padding-right:%?20?%;line-height:%?38?%}.present-shop .present-shop-text .present-row-flex .distance[data-v-3bc4e3a2]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right;color:#332f2e}.present-shop .present-shop-text .openTime[data-v-3bc4e3a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.present-shop .present-shop-text .openTime uni-text[data-v-3bc4e3a2]{margin-right:%?10?%}.present-shop .present-shop-text .star-row[data-v-3bc4e3a2]{display:-webkit-box;display:-webkit-flex;display:flex;color:#332f2e;font-size:%?24?%;height:%?25?%;line-height:%?25?%}.present-shop .present-shop-text .present-shopName[data-v-3bc4e3a2]{font-size:%?34?%;height:%?48?%;line-height:%?48?%;color:#332f2e;font-weight:600}.open[data-v-3bc4e3a2]{font-size:%?24?%;color:#f63100}.site[data-v-3bc4e3a2]{line-height:%?33?%}.flex-row[data-v-3bc4e3a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.present-time[data-v-3bc4e3a2]{padding-top:%?10?%;line-height:%?33?%;font-size:%?24?%;color:#332f2e}.present-time uni-text[data-v-3bc4e3a2]{opacity:.6;padding-right:%?20?%}.present-time .open[data-v-3bc4e3a2]{opacity:1!important;display:inline-block}.ico-list[data-v-3bc4e3a2]{padding-top:%?50?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-justify-content:space-around;justify-content:space-around}.ico-list .item[data-v-3bc4e3a2]{padding-bottom:%?40?%}.ico-list .item .ico[data-v-3bc4e3a2]{width:%?146?%;height:%?146?%;text-align:center;background-color:#faf8f7;line-height:%?146?%}.ico-list .item .ico uni-image[data-v-3bc4e3a2]{width:%?76?%;vertical-align:middle;height:%?76?%}.ico-list .item .item-text[data-v-3bc4e3a2]{padding-top:%?16?%;font-size:%?26?%;text-align:center;color:#332f2e}.shopList .shop-content[data-v-3bc4e3a2]{padding:0 %?24?%}.shopList .shop-content .present-shop[data-v-3bc4e3a2]{margin-bottom:%?20?%}.shopList .shopInfo[data-v-3bc4e3a2]{height:%?80?%;line-height:%?80?%;padding-left:%?24?%;font-size:%?24?%;color:#332f2e;border-bottom:1px solid #eee}.tag[data-v-3bc4e3a2]{color:#fff;font-size:%?19?%}.tag uni-text[data-v-3bc4e3a2]{text-align:center;display:inline-block;width:%?30?%;height:%?30?%;line-height:%?30?%;-webkit-border-radius:%?8?%;border-radius:%?8?%;margin-right:%?16?%}.tag uni-text[data-v-3bc4e3a2]:last-of-type{margin-right:0!important}.color-blue[data-v-3bc4e3a2]{background-color:#017cff}.color-red[data-v-3bc4e3a2]{background-color:#f63100}.color-orange[data-v-3bc4e3a2]{background-color:#f67100}.filtrate[data-v-3bc4e3a2]{padding:0 %?24?%;position:relative}.filtrate .filtrate-table[data-v-3bc4e3a2]{color:#332f2e;font-size:%?35?%;line-height:%?60?%;font-weight:700}.filtrate .filtrate-row[data-v-3bc4e3a2]{display:-webkit-box;display:-webkit-flex;display:flex;font-size:%?24?%;line-height:%?56?%}.filtrate .filtrate-row .filtrate-item[data-v-3bc4e3a2]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.screen-title[data-v-3bc4e3a2]{display:inline-block}.caret-bottom[data-v-3bc4e3a2]{border-top:%?12?% solid #999;-webkit-transform:translate(50%,50%);transform:translate(50%,50%)}.caret-bottom[data-v-3bc4e3a2]{border-bottom:%?12?% solid #999}.caret[data-v-3bc4e3a2]{width:0;height:0;display:inline-block;border-left:%?12?% solid transparent;border-bottom:%?12?% solid transparent;border-right:%?12?% solid transparent}.activity[data-v-3bc4e3a2]{background-color:#fff;-webkit-border-radius:%?8?%;border-radius:%?8?%;margin-top:%?20?%}.activity-title[data-v-3bc4e3a2]{font-size:%?26?%;line-height:%?76?%;height:%?76?%;padding-left:%?20?%}.activity-list[data-v-3bc4e3a2]{overflow:scroll;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-overflow-scrolling:touch;font-size:%?24?%}.activity-list .uni-margin-wrap[data-v-3bc4e3a2]{width:%?702?%}.activity-list .swiper[data-v-3bc4e3a2]{height:%?324?%}.activity-list .swiper-item[data-v-3bc4e3a2]{display:block;height:%?324?%;line-height:%?324?%;text-align:center}.activity-list .swiper-item uni-image[data-v-3bc4e3a2]{width:100%;height:100%;-webkit-border-radius:%?8?%;border-radius:%?8?%}.activity-item[data-v-3bc4e3a2]{width:%?264?%;padding-right:%?25?%}.activity-item .image-up[data-v-3bc4e3a2]{position:relative}.activity-item .greensName[data-v-3bc4e3a2]{line-height:%?38?%}.activity-item uni-image[data-v-3bc4e3a2]{width:%?264?%;height:%?264?%;-webkit-border-radius:%?8?%;border-radius:%?8?%}.activity-item .greensPrice[data-v-3bc4e3a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;line-height:%?38?%}.activity-item .price[data-v-3bc4e3a2]{font-weight:600;color:#f63100}.activity-item .uni-icon-plus-filled[data-v-3bc4e3a2]{background:-webkit-gradient(linear,left top,right top,from(#fb5e00),to(#f63300));background:-webkit-linear-gradient(left,#fb5e00,#f63300);background:linear-gradient(90deg,#fb5e00,#f63300);-webkit-background-clip:text;color:transparent;font-size:%?36?%!important}.slideshow .uni-margin-wrap[data-v-3bc4e3a2]{width:%?702?%}.slideshow .uni-margin-wrap .swiper[data-v-3bc4e3a2]{height:%?126?%}.slideshow .uni-margin-wrap .swiper-item[data-v-3bc4e3a2]{display:block;height:%?126?%;line-height:%?126?%;text-align:center}.slideshow .uni-margin-wrap .swiper-list[data-v-3bc4e3a2]{margin-top:%?40?%;margin-bottom:0}.slideshow .uni-margin-wrap .uni-common-mt[data-v-3bc4e3a2]{margin-top:%?60?%;position:relative}.slideshow .uni-margin-wrap .info[data-v-3bc4e3a2]{position:absolute;right:%?20?%}.present[data-v-3bc4e3a2]{position:absolute;top:0;left:%?-8?%;z-index:10;font-size:%?24?%;color:#fff;text-align:center;width:%?86?%;height:%?36?%;background-image:-webkit-gradient(linear,left top,right top,from(#fb5f00),to(#f63100));background-image:-webkit-linear-gradient(left,#fb5f00,#f63100);background-image:linear-gradient(90deg,#fb5f00,#f63100);-webkit-border-radius:0 %?100?% %?100?% 0;border-radius:0 %?100?% %?100?% 0;-webkit-border-radius:0 %?100?% %?100?% 0;border-radius:0 %?100?% %?100?% 0}.present .triangle[data-v-3bc4e3a2]{position:absolute;bottom:%?-8?%;left:0;display:inline-block;border-top:%?4?% solid #c22700;border-right:%?4?% solid #c22700;border-bottom:%?4?% solid #fff;border-left:%?4?% solid #fff}.condition[data-v-3bc4e3a2]{padding-left:%?24?%;position:absolute;background-color:#fff;font-size:%?24?%;bottom:%?-116?%;left:0;width:%?750?%;z-index:1000}.loading-more-text[data-v-3bc4e3a2]{font-size:%?28?%;text-align:center;color:#999;padding:%?10?%}",""]),t.exports=e},"469f":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},custom:{type:Boolean,default:!1},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){},methods:{clear:function(){},open:function(){var t=this;this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick((function(){setTimeout((function(){t.ani="uni-"+t.type}),30)}))},close:function(t){var e=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick((function(){setTimeout((function(){e.showPopup=!1}),300)})))}}};e.default=a},"4c0d":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".uni-popup[data-v-10e988d8]{position:fixed;top:0;top:0;bottom:0;left:0;right:0;z-index:998;overflow:hidden}.uni-popup__mask[data-v-10e988d8]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:998;background:rgba(0,0,0,.4);opacity:0}.uni-popup__mask.ani[data-v-10e988d8]{-webkit-transition:all .3s;transition:all .3s}.uni-popup__mask.uni-bottom[data-v-10e988d8],\n.uni-popup__mask.uni-center[data-v-10e988d8],\n.uni-popup__mask.uni-top[data-v-10e988d8]{opacity:1}.uni-popup__wrapper[data-v-10e988d8]{position:absolute;z-index:999;-webkit-box-sizing:border-box;box-sizing:border-box}.uni-popup__wrapper.ani[data-v-10e988d8]{-webkit-transition:all .3s;transition:all .3s}.uni-popup__wrapper.top[data-v-10e988d8]{top:0;left:0;width:100%;-webkit-transform:translateY(-100%);transform:translateY(-100%)}.uni-popup__wrapper.bottom[data-v-10e988d8]{bottom:0;left:0;width:100%;-webkit-transform:translateY(100%);transform:translateY(100%)}.uni-popup__wrapper.center[data-v-10e988d8]{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0}.uni-popup__wrapper-box[data-v-10e988d8]{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:%?16?% %?16?% 0 0;border-radius:%?16?% %?16?% 0 0}.uni-popup__wrapper.uni-custom .uni-popup__wrapper-box[data-v-10e988d8]{padding:%?30?%;background:#fff}.uni-popup__wrapper.uni-custom.center .uni-popup__wrapper-box[data-v-10e988d8]{position:relative;max-width:80%;max-height:80%;overflow-y:scroll}.uni-popup__wrapper.uni-custom.bottom .uni-popup__wrapper-box[data-v-10e988d8],\n.uni-popup__wrapper.uni-custom.top .uni-popup__wrapper-box[data-v-10e988d8]{width:100%;max-height:500px;overflow-y:scroll;-webkit-overflow-scrolling:touch}.uni-popup__wrapper.uni-bottom[data-v-10e988d8],\n.uni-popup__wrapper.uni-top[data-v-10e988d8]{-webkit-transform:translateY(0);transform:translateY(0)}.uni-popup__wrapper.uni-center[data-v-10e988d8]{-webkit-transform:scale(1);transform:scale(1);opacity:1}",""]),t.exports=e},"57c9":function(t,e,i){var a=i("25b4");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("63414800",a,!0,{sourceMap:!1,shadowMode:!1})},"5b07":function(t,e,i){var a=i("4c0d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("5f4c1362",a,!0,{sourceMap:!1,shadowMode:!1})},"5f64":function(t,e,i){"use strict";i.r(e);var a=i("76c4"),n=i("e971");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("1a19");var r,s=i("f0c5"),d=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"10e988d8",null,!1,a["a"],r);e["default"]=d.exports},"6afa":function(t,e,i){"use strict";i.r(e);var a=i("75b5"),n=i("f445");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("958d");var r,s=i("f0c5"),d=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"3bc4e3a2",null,!1,a["a"],r);e["default"]=d.exports},"75b5":function(t,e,i){"use strict";var a={uniPopup:i("5f64").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"home"},[t.shopList.length&&t.loding?i("v-uni-view",[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"within"},[t.navImage?i("v-uni-view",{staticClass:"slideshow"},[i("v-uni-view",{staticClass:"uni-margin-wrap"},[i("v-uni-swiper",{staticClass:"swiper",attrs:{circular:!0,autoplay:t.autoplay,interval:t.interval,duration:t.duration}},t._l(t.navImage,(function(e,a){return i("v-uni-swiper-item",{key:a,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toUrl(e.url)}}},[i("v-uni-image",{staticClass:"headImage",attrs:{src:e.topPic,mode:""}})],1)})),1)],1)],1):t._e(),t.activity?i("v-uni-view",{staticClass:"activity"},[i("v-uni-view",{staticClass:"activity-title"},[t._v(t._s(t.activity[t.actTitle].title))]),i("v-uni-view",{staticClass:"activity-list"},[i("v-uni-view",{staticClass:"uni-margin-wrap"},[i("v-uni-swiper",{staticClass:"swiper",attrs:{circular:!0,"indicator-dots":!0,"indicator-active-color":"#F63100","active-color":"#D8D8D8",autoplay:t.actPlay,interval:t.actInterval,duration:500},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperTab.apply(void 0,arguments)}}},t._l(t.activity,(function(e,a){return i("v-uni-swiper-item",{key:a},[i("v-uni-view",{staticClass:"swiper-item ",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toUrl(e.url)}}},[i("v-uni-image",{attrs:{src:e.actPic,mode:""}})],1)],1)})),1)],1)],1)],1):t._e(),t._e()],1)],1),i("v-uni-view",{staticClass:"bg"}),i("v-uni-view",{staticClass:"filtrate"},[i("v-uni-view",{staticClass:"filtrate-table"},[t._v("附近门店")]),t._e(),t._e()],1),i("v-uni-view",{staticClass:"shopList"},[i("v-uni-view",{staticClass:"shop-content"},[t._l(t.shopList,(function(e,a){return a<=t.dataLength?i("v-uni-view",{key:a,staticClass:"present-shop",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.routeTo(e)}}},[i("v-uni-view",{staticClass:"present-l"},[i("v-uni-view",{staticClass:"present-shop-logo"},[i("v-uni-image",{attrs:{src:e.logo,mode:""}})],1),i("v-uni-view",{staticClass:"tag"},[i("v-uni-text",{staticClass:"color-orange"},[t._v("外")]),i("v-uni-text",{staticClass:"color-red"},[t._v("点")]),i("v-uni-text",{staticClass:"color-blue"},[t._v("预")])],1)],1),i("v-uni-view",{staticClass:"present-shop-text"},[i("v-uni-view",{staticClass:"present-shopName"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"present-row-flex"},[i("v-uni-view",{staticClass:"item"},[t._v("起送￥"+t._s(e.startFee))]),i("v-uni-view",{staticClass:"item"},[t._v("配送￥"+t._s(e.deliverFee))]),i("v-uni-view",{staticClass:"item"},[t._v(t._s(e.deliverTime)+"分钟")]),i("v-uni-view",{staticClass:"item distance"},[t._v(t._s(t.returnSlide(e.shopDistance)))])],1),i("v-uni-view",{staticClass:" present-row-flex"},[i("v-uni-view",{staticClass:"openTime"},[t._v("营业时间："),t._l(e.time,(function(e,a){return i("v-uni-text",{key:a},[t._v(t._s(e.startTime+"-"+e.endTime))])}))],2),e.tel?i("v-uni-view",[t._v("电话："+t._s(e.tel))]):t._e()],1),i("v-uni-view",{staticClass:"present-row-flex"},[i("v-uni-view",[t._v("地址："+t._s(e.addr?e.addr:"地址未设置"))])],1),i("v-uni-view",{staticClass:"present-row-flex"},[e.youhuiTit?i("v-uni-view",{staticClass:"shop-tag"},[t._v(t._s(e.youhuiTit))]):t._e()],1)],1)],1):t._e()})),t.isLoading&&t.shopList.length>10?i("v-uni-view",{staticClass:"loading-more-text"},[t._v(t._s(t.loadingText))]):t._e()],2)],1)],1):t._e(),i("uni-popup",{ref:"popup",attrs:{type:"top"}}),!t.shopList.length&&t.loding?i("v-uni-view",{staticClass:"errData"},[t._v("正在定位......")]):t._e()],1)},o=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}))},"76c4":function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showPopup?i("v-uni-view",{staticClass:"uni-popup"},[i("v-uni-view",{staticClass:"uni-popup__mask",class:[t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}}),i("v-uni-view",{staticClass:"uni-popup__wrapper",class:[t.type,t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}},[i("v-uni-view",{staticClass:"uni-popup__wrapper-box",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1)],1):t._e()},o=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}))},"958d":function(t,e,i){"use strict";var a=i("57c9"),n=i.n(a);n.a},a65a:function(t,e,i){"use strict";var a=i("ee27");i("b680"),i("ac1f"),i("466d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f3f3")),o=i("1956"),r=a(i("f5dfd")),s=(a(i("5f64")),i("1335"),i("2f62")),d={components:{uniIcon:r.default},data:function(){return{autoplay:!0,interval:1e4,duration:500,actPlay:!0,actInterval:3e3,title:"外卖导航",actTitle:0,currentPosition:{latitude:"",longitude:""},loadingText:"加载更多...",isLoading:!1,navImage:[],activity:[],loding:!1,icoList:["点餐","预点单","外卖","支付","会员","发票","商家信息","联系商家"],shopList:[],option:{},shopIndex:{},userInfo:{openId:"",appid:""},onoff:!0,dataLength:10}},onPullDownRefresh:function(){var t="",e=this;setTimeout((function(){uni.stopPullDownRefresh(),e.tenantId&&(t=e.tenantId),e.getShopList(t),e.dataLength=10}),1e3)},computed:(0,n.default)({},(0,s.mapState)(["homeOptions"])),onReachBottom:function(){var t=this;this.isLoading=!0,setTimeout((function(){t.isLoading=!0,t.shopList.length<t.dataLength?t.loadingText="已加载全部":t.dataLength=t.dataLength+10}),1e3)},onShow:function(){},onLoad:function(t){var e="";"{}"!=JSON.stringify(t)?(e=t,this.$store.state.homeOptions=t):e=this.$store.state.homeOptions,console.log("undefined"!=typeof e.tenantId,"option.tenantId ",e.tenantId),"undefined"!=typeof e.tenantId&&(this.tenantId=e.tenantId);try{e.openId&&(uni.setStorageSync("isWxMemberOpenId",e.openId),uni.setStorageSync("homeOpenId_jx",e.openId),uni.setStorageSync("wx_Member_OpenId",e.openId)),e.appid&&(uni.setStorageSync("isWxAccountAppId",e.appid),uni.setStorageSync("homeAppId_jx",e.appid))}catch(i){}this._isMobile(),this.getShopList(e.tenantId),uni.setNavigationBarTitle({title:this.title})},methods:{getScanCode:function(){uni.scanCode({needResult:0,success:function(t){console.log(t)}})},getAuth:function(){var t=this;uni.getSetting({success:function(e){console.log(e,"getSetting"),e.authSetting["scope.userInfo"]||uni.redirectTo({url:"../authorize/authorize"}),void 0!=e.authSetting["scope.userLocation"]&&1!=e.authSetting["scope.userLocation"]?(console.log("未授权地理位置"),wx.showModal({title:"请求授权当前位置",content:"需要获取您的地理位置，请确认授权",success:function(e){e.cancel?(wx.showToast({title:"拒绝授权",icon:"none",duration:1e3}),t.getAddr()):e.confirm&&wx.openSetting({success:function(e){1==e.authSetting["scope.userLocation"]?(t.getAddr(),wx.showToast({title:"授权成功",icon:"success",duration:1e3})):wx.showToast({title:"授权失败",icon:"none",duration:1e3})}})}})):e.authSetting["scope.userLocation"]?t.getAddr():uni.getLocation({success:function(e){var i=e.latitude,a=e.longitude;t.currentPosition.latitude=i,t.currentPosition.longitude=a,console.log(e,"首次确认授权地理位置"),t.getShopList(t.tenantId)}})}})},returnSlide:function(t){return t<1?1e3*t+"m":"undefined"!=typeof t?t.toFixed(1)+"km":void 0},toUrl:function(t){t&&(location.href=t)},swiperTab:function(t){this.actTitle=t.detail.current},togglePopup:function(t,e){this.$refs[e].open()},_isMobile:function(){var t=window.navigator.userAgent.toLowerCase(),e="micromessenger"==t.match(/MicroMessenger/i),i=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return e&&i},routeTo:function(t){var e=this,i="http://web.jiangxinit.com/vip21/load.html?orderType=0&shop="+t.shopId+"&openId="+uni.getStorageSync("isWxMemberOpenId")+"&isShowRemark=0&time=2780536198867&isShowSales=0&openid="+uni.getStorageSync("isWxMemberOpenId")+"&appid="+uni.getStorageSync("isWxAccountAppId")+"&wmtype=1&oldAndNew=0&table=0&mchntcd="+t.mchntcd;this.onoff&&(this.onoff=!1,location.href=i,setTimeout((function(){e.onoff=!0}),500))},getUserInfo:function(t){var e=this,i={code:t.code,account:t.state};o.http.post("/api/oAuthOpenId",i).then((function(t){console.log(t,"user"),t.data.data&&(e.userInfo.openId=t.data.data.openid,e.userInfo.appid=t.data.data.appid,t.data.data.openid&&localStorage.setItem("isWxMemberOpenId",t.data.data.openid),t.data.data.appid&&localStorage.setItem("isWxAccountAppId",t.data.data.appid))})).catch((function(t){}))},getShopList:function(t){var e=this;uni.showLoading({title:"loading"});var i={tenantId:t,shopLon:this.currentPosition.longitude,shopLat:this.currentPosition.latitude};console.log(this.currentPosition.latitude,i,this.currentPosition),o.http.post("/data/shopNav/pageInfo",i).then((function(t){if(e.loding=!0,uni.hideLoading(),0===t.data.code){e.shopList=t.data.data.shop,e.activity=t.data.data.act,e.navImage=t.data.data.top;var i=t.data.data,a=i.autoplay,n=i.interval,o=i.actTitle,r=i.actPlay,s=i.actInterval;e.autoplay=1==a,e.interval=1e3*n,e.actPlay=1==r,e.actInterval=1e3*s,e.title=o,e.shopList.length&&(e.shopIndex=e.shopList[0])}})).catch((function(t){e.loding=!0,uni.hideLoading()}))},getdistance:function(t,e){var i=this.currentPosition.latitude,a=this.currentPosition.longitude;return this.juli(t,e,i,a).toFixed(1)},juli:function(t,e,i,a){var n=t*Math.PI/180,o=i*Math.PI/180,r=n-o,s=e*Math.PI/180-a*Math.PI/180,d=2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(n)*Math.cos(o)*Math.pow(Math.sin(s/2),2)));return d*=6378.137,d=Math.round(1e4*d)/1e4,d},setAddr:function(){var t=this;uni.chooseLocation({success:function(e){console.log("纬度："+e.latitude),console.log("经度："+e.longitude);var i=e.latitude,a=e.longitude;t.currentPosition.latitude=i,t.currentPosition.longitude=a,t.getShopList(t.tenantId)}})},getAddr:function(){var t=this;uni.getLocation({type:"wgs84",fail:function(t){console.log("获取地理位置失败",t)},complete:function(e){t.getShopList(t.tenantId),uni.hideLoading()},success:function(e){console.log(e,"获取地理位置");var i=e.latitude,a=e.longitude;t.currentPosition.latitude=i,t.currentPosition.longitude=a}})},getLocationInfo:function(){uni.getLocation({type:"wgs84",success:function(t){console.log(t)}})}}};e.default=d},e971:function(t,e,i){"use strict";i.r(e);var a=i("469f"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},f445:function(t,e,i){"use strict";i.r(e);var a=i("a65a"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a}}]);