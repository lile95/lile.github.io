(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-authorize-authorize"],{1335:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.allMenu=r,n.info=i,n.ordersSplit=a,n.memberPay=s,n.getCrmCard=u,n.myorders=d,n.pay=p,n.param=c,n.orderDetails=f,n.getInfo=h,n.getOpenId=l,n.getPhone=g,n.getUnionid=m,n.getCoupon=v,n.discountPrice=w,n.tuiwm=b,n.cancelwm=y,n.placeAnOrder=I,n.confirm=x,n.addAddr=P,n.addrEdit=_,n.addrGet=C,n.addrDel=k,n.calAmount=A,n.upCardPage=S;var o=e("1956");function r(t){return o.http.post("/dian/menu/allMenu?wmType="+t.wmtype+"&shopId="+t.shopId)}function i(t){return o.http.post("/dian/shop/info?wmType="+t.wmtype+"&shopId="+t.shopId)}function a(t){return o.http.post("/dian/orders/split",t)}function s(t){return o.http.post("/dishes/orders/memberPay",t)}function u(t){return o.http.post("/crm/getCrmCard",t)}function d(t){return o.http.post("/dian/orders/myorders",t)}function p(t){return o.http.post("/dian/orders/payvip",t)}function c(t,n){return o.http.post("/dishes/menuShop/param?param="+t+"&shopId="+n)}function f(t){return o.http.post("/dian/orders/return",t)}function h(t){return o.http.post("/dian/shop/info?shopId="+t+"&wmType=1")}function l(t,n,e){var r={code:n,wxUser:e};return o.http.post("/dian/miniapp/"+t+"/info",r)}function g(t,n,e,r){console.log(n,e);var i={session_key:r.session_key,encryptedData:n.encryptedData,iv:n.iv,appType:0,openid:r.openid,unionid:r.unionid,userInfo:e.userInfo};return o.http.post("/dian/miniapp/"+t+"/phone?",i)}function m(t){return o.http.post("/crm/unionid",t)}function v(t){return o.http.post("/tapi/memberCoupon",t)}function w(t){return o.http.post("/dishes/api/discountPrice",t)}function b(t){return o.http.post("/dishes/orders/tuiwm",t)}function y(t){return o.http.post("/dishes/orders/cancelwm",t)}function I(t){return o.http.post("/dian/orders/entry",t)}function x(t){return o.http.post("/dishes/orders/confirm",t)}function P(t){return o.http.post("/dian/addr",t)}function _(t){return o.http.post("/dian/addr/edit",t)}function C(t){return o.http.post("/dian/addr/get",t)}function k(t){return o.http.post("/dian/addr/del/"+t)}function A(t){return o.http.post("/dian/orders/amount",t)}function S(t){return o.http.post("/crm/upCardInfo",t)}},"1df1":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("1335"),r={data:function(){return{showLoad:!0,showAuth:!0,userInfo:{},session_key:"",info:{}}},created:function(){var t=this;uni.setNavigationBarTitle({title:"登录授权"});wx.getAccountInfoSync().miniProgram.appId;uni.getSetting({success:function(n){console.log(n,"getSetting"),n.authSetting["scope.userInfo"]?t.getInfo():t.showLoad=!0}})},methods:{getInfo:function(){var t=this,n=wx.getAccountInfoSync().miniProgram.appId,e="";wx.login({success:function(r){e=r.code,console.log(r,n,"login"),wx.getUserInfo({success:function(r){t.info=r,console.log(r,"getUserInfo"),(0,o.getOpenId)(n,e,r).then((function(n){console.log(n,"getOpenId"),t.userInfo=n.data.data,t.session_key=n.data.data.session_key,uni.setStorageSync("isWxAppletOpenId",n.data.data.openid),n.data.data.phone?uni.switchTab({url:"../home/home"}):t.showAuth=!1}))}})}})},onGetPhoneNumber:function(t){console.log(t);var n=wx.getAccountInfoSync().miniProgram.appId;"getPhoneNumber:fail user deny"==t.detail.errMsg||(0,o.getPhone)(n,t.mp.detail,this.info,this.userInfo).then((function(t){console.log(t,"phone"),t.data.data.phone&&(uni.setStorageSync("isWxMemberPhone",t.data.data.phone),uni.switchTab({url:"../home/home"}))}))},onGotUserInfo:function(t){console.log(t),t.detail.userInfo?(this.showAuth=!1,this.getInfo()):uni.showModal({content:"请确认授权"})}}};n.default=r},2434:function(t,n,e){var o=e("8f17");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=e("4f06").default;r("0627f6a7",o,!0,{sourceMap:!1,shadowMode:!1})},5742:function(t,n,e){"use strict";e.r(n);var o=e("de7b"),r=e("8561");for(var i in r)"default"!==i&&function(t){e.d(n,t,(function(){return r[t]}))}(i);e("b570");var a,s=e("f0c5"),u=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,"2a94c373",null,!1,o["a"],a);n["default"]=u.exports},8561:function(t,n,e){"use strict";e.r(n);var o=e("1df1"),r=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=r.a},"8f17":function(t,n,e){var o=e("24fb");n=o(!1),n.push([t.i,".content[data-v-2a94c373]{text-align:center;padding-top:%?100?%}.logo[data-v-2a94c373]{text-align:center;display:inline-block;border:1px solid #eee;margin-top:%?100?%;width:%?160?%;height:%?160?%;-webkit-border-radius:50% 50%;border-radius:50% 50%;overflow:hidden;-webkit-box-shadow:3px 3px 10px rgba(0,0,0,.2);box-shadow:3px 3px 10px rgba(0,0,0,.2);margin:%?20?%}.name[data-v-2a94c373]{color:#666;font-size:%?28?%}.auth[data-v-2a94c373]{text-align:center\r\n\t/* margin-top: 40%; */}.title[data-v-2a94c373]{text-align:center;font-size:%?26?%;margin:%?100?% 0 %?40?%}.auth uni-button[data-v-2a94c373]{background-color:#4cd964;color:#fff;width:80%;font-size:%?30?%;height:%?70?%;line-height:%?70?%}",""]),t.exports=n},b570:function(t,n,e){"use strict";var o=e("2434"),r=e.n(o);r.a},de7b:function(t,n,e){"use strict";var o,r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showLoad,expression:"showLoad"}],staticClass:"content"},[e("v-uni-view",{staticClass:"logo"},[e("v-uni-open-data",{attrs:{type:"userAvatarUrl"}})],1),e("v-uni-view",{staticClass:"name"},[e("v-uni-open-data",{attrs:{type:"userNickName"}})],1),e("v-uni-view",{staticClass:"title"},[t._v("进入点餐小程序！")]),e("v-uni-view",{staticClass:"auth"},[t.showAuth?e("v-uni-button",{attrs:{"open-type":"getUserInfo",lang:"zh_CN"},on:{getuserinfo:function(n){arguments[0]=n=t.$handleEvent(n),t.onGotUserInfo.apply(void 0,arguments)}}},[t._v("微信授权登录")]):e("v-uni-button",{attrs:{"open-type":"getPhoneNumber",lang:"zh_CN"},on:{getphonenumber:function(n){arguments[0]=n=t.$handleEvent(n),t.onGetPhoneNumber.apply(void 0,arguments)}}},[t._v("获取手机号码")])],1)],1)},i=[];e.d(n,"b",(function(){return r})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}))}}]);