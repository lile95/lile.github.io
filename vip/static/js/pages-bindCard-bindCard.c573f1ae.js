(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bindCard-bindCard"],{"086a":function(t,n,e){"use strict";e.r(n);var o=e("95e0"),a=e("daf4");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("0969");var r,d=e("f0c5"),s=Object(d["a"])(a["default"],o["b"],o["c"],!1,null,"d8492baa",null,!1,o["a"],r);n["default"]=s.exports},"0969":function(t,n,e){"use strict";var o=e("50e7"),a=e.n(o);a.a},1335:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.allMenu=a,n.info=i,n.ordersSplit=r,n.memberPay=d,n.getCrmCard=s,n.myorders=u,n.pay=c,n.param=f,n.orderDetails=p,n.getInfo=l,n.getOpenId=h,n.getPhone=b,n.getUnionid=v,n.getCoupon=m,n.discountPrice=g,n.tuiwm=w,n.cancelwm=C,n.placeAnOrder=y,n.confirm=x,n.addAddr=_,n.addrEdit=I,n.addrGet=k,n.addrDel=N,n.calAmount=M,n.upCardPage=z,n.bindCard=O;var o=e("1956");function a(t){return o.http.post("/dian/menu/allMenu?wmType="+t.wmtype+"&shopId="+t.shopId)}function i(t){return o.http.post("/dian/shop/info?wmType="+t.wmtype+"&shopId="+t.shopId)}function r(t){return o.http.post("/dian/orders/split",t)}function d(t){return o.http.post("/dishes/orders/memberPay",t)}function s(t){return o.http.post("/crm/getCrmCard",t)}function u(t){return o.http.post("/dian/orders/myorders",t)}function c(t){return o.http.post("/dian/orders/payvip",t)}function f(t,n){return o.http.post("/dishes/menuShop/param?param="+t+"&shopId="+n)}function p(t){return o.http.post("/dian/orders/return",t)}function l(t){return o.http.post("/dian/shop/info?shopId="+t+"&wmType=1")}function h(t,n,e){var a={code:n,wxUser:e};return o.http.post("/dian/miniapp/"+t+"/info",a)}function b(t,n,e,a){console.log(n,e);var i={session_key:a.session_key,encryptedData:n.encryptedData,iv:n.iv,appType:0,openid:a.openid,unionid:a.unionid,userInfo:e.userInfo};return o.http.post("/dian/miniapp/"+t+"/phone?",i)}function v(t){return o.http.post("/crm/unionid",t)}function m(t){return o.http.post("/tapi/memberCoupon",t)}function g(t){return o.http.post("/dishes/api/discountPrice",t)}function w(t){return o.http.post("/dishes/orders/tuiwm",t)}function C(t){return o.http.post("/dishes/orders/cancelwm",t)}function y(t){return o.http.post("/dian/orders/entry",t)}function x(t){return o.http.post("/dishes/orders/confirm",t)}function _(t){return o.http.post("/dian/addr",t)}function I(t){return o.http.post("/dian/addr/edit",t)}function k(t){return o.http.post("/dian/addr/get",t)}function N(t){return o.http.post("/dian/addr/del/"+t)}function M(t){return o.http.post("/dian/orders/amount",t)}function z(t){return o.http.post("/crm/upCardInfo",t)}function O(t){return o.http.post("/card/bindCard",t)}},"1de5":function(t,n,e){"use strict";t.exports=function(t,n){return n||(n={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),n.hash&&(t+=n.hash),/["'() \t\n]/.test(t)||n.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"50e7":function(t,n,e){var o=e("9d0c");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=e("4f06").default;a("5b037c7c",o,!0,{sourceMap:!1,shadowMode:!1})},"95e0":function(t,n,e){"use strict";var o,a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("v-uni-view",{staticClass:" bc-content"},[e("v-uni-view",{staticClass:"card"},[t.bindc?t._e():e("v-uni-view",{staticClass:"card-text"},[t._v("未绑定实体卡")]),t.bindc?e("v-uni-view",{staticClass:"content",style:{"background-image":t.userInfo.vipUrl?"url("+t.userInfo.vipUrl+")":""}},[e("v-uni-view",{staticClass:"shopName"},[t._v(t._s(t.userInfo.shopName))]),e("v-uni-view",{staticClass:"card-number"},[t._v(t._s("NO:"+t.userInfo.memberCode))])],1):t._e()],1),e("v-uni-view",{staticClass:"form"},[e("v-uni-view",{staticClass:"form-row"},[e("v-uni-view",{staticClass:"form-lable"},[t._v("卡号")]),e("v-uni-view",{staticClass:"form-text"},[e("v-uni-input",{attrs:{type:"number",disabled:t.doneBind,"placeholder-style":"color:rgba(51,47,46,0.2)",placeholder:"请输入卡号",value:""},model:{value:t.form.cardNo,callback:function(n){t.$set(t.form,"cardNo",n)},expression:"form.cardNo"}})],1)],1),e("v-uni-view",{staticClass:"form-row"},[e("v-uni-view",{staticClass:"form-lable"},[t._v("手机")]),e("v-uni-view",{staticClass:"form-text"},[e("v-uni-input",{attrs:{type:"number",disabled:t.doneBind,"placeholder-style":"color:rgba(51,47,46,0.2)",placeholder:"请输入常用手机号",value:""},model:{value:t.form.phone,callback:function(n){t.$set(t.form,"phone",n)},expression:"form.phone"}})],1)],1),e("v-uni-view",{staticClass:"hint"},[t.form.phone&&t.form.cardNo?t._e():e("v-uni-text",[t._v("请输入卡号和手机号！！")])],1)],1),t.doneBind?t._e():e("v-uni-view",{staticClass:"submit"},[e("v-uni-button",{staticClass:"btn",attrs:{disabled:t.loading,loading:t.loading,type:"primary"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.bindCard.apply(void 0,arguments)}}},[t._v("绑定")])],1)],1)],1)},i=[];e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}))},"9d0c":function(t,n,e){var o=e("24fb"),a=e("1de5"),i=e("e55f");n=o(!1);var r=a(i);n.push([t.i,".bc-content[data-v-d8492baa]{background-color:#fff;padding:%?20?% %?42?%}.bc-content .card[data-v-d8492baa]{height:%?280?%;border-radius:%?16?%;border:%?1?% dashed #979797;background:#fafafa}.bc-content .card-text[data-v-d8492baa]{height:%?40?%;font-size:%?28?%;color:#332f2e;text-align:center;line-height:%?280?%}.bc-content .content[data-v-d8492baa]{background-image:url("+r+");background-repeat:no-repeat;background-size:100% 100%;width:100%;height:100%;position:relative}.bc-content .content .shopName[data-v-d8492baa]{color:#fff;font-weight:600;padding:%?30?%;height:%?48?%;line-height:%?48?%;font-size:%?34?%}.bc-content .content .card-number[data-v-d8492baa]{padding:%?30?% %?22?%;line-height:%?42?%;font-size:%?30?%;color:#fff;position:absolute;bottom:0;left:0}.hint[data-v-d8492baa]{font-size:%?22?%;color:#f63100;letter-spacing:0;text-align:center}.form-row[data-v-d8492baa]{display:-webkit-box;display:-webkit-flex;display:flex;height:%?88?%;line-height:%?88?%;background-color:#fafafa;font-size:%?30?%;padding:%?30?% 0;padding-left:%?44?%}.form-row .form-lable[data-v-d8492baa]{width:%?100?%}.form-row .form-text[data-v-d8492baa]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.form-row .form-text uni-input[data-v-d8492baa]{font-size:%?30?%;height:%?88?%;line-height:%?88?%;color:#332f2e}.submit[data-v-d8492baa]{padding-top:%?10?%}.submit .btn[data-v-d8492baa]{background:#f63100;height:%?88?%;line-height:%?88?%;border-radius:%?44?%;font-size:%?32?%;color:#fff}",""]),t.exports=n},b269:function(t,n,e){"use strict";var o=e("ee27");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(e("f3f3")),i=e("2f62"),r=e("1335"),d={data:function(){return{loading:!1,form:{phone:"",cardNo:""},bindc:!1,doneBind:!1}},computed:(0,a.default)({},(0,i.mapState)(["userInfo"])),onLoad:function(){this.userInfo.hardCardNo&&(this.form.cardNo=this.userInfo.hardCardNo,this.bindc=!0,this.doneBind=!0),this.userInfo.phone&&(this.form.phone=this.userInfo.phone)},methods:{bindCard:function(){var t=this;this.loading=!0,Object.assign(this.form,{openId:uni.getStorageSync("isWxMemberOpenId")}),this.bindc=!0,(0,r.bindCard)(this.form).then((function(n){console.log(n),0===n.data.status?(t.bindc=!0,uni.showToast({title:n.data.message,icon:"success",mask:!0}),setTimeout((function(){uni.redirectTo({url:"../index/index"})}),2e3)):uni.showModal({content:n.data.message,showCancel:!1}),t.loading=!1})).catch((function(n){t.loading=!1}))}}};n.default=d},daf4:function(t,n,e){"use strict";e.r(n);var o=e("b269"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=a.a},e55f:function(t,n,e){t.exports=e.p+"static/img/cardbg.796031a4.png"}}]);